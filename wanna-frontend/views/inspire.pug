doctype html
html
	head
		include header.pug
		link(rel="stylesheet" href="/stylesheets/bootstrap.min.css")
		style.
			.comment{
				width:100%;
				padding: 8px 10px 8px 15px;
				border-radius:20px !important;
				background-color: #EEE !important;
				color: #000 !important;
			}
			.toggle-description{
				padding: 0px 10px 0px 10px;
			}
			.details-post{
				font-size:14px;
				margin:0px !important;
			}
			.carousel-indicators li {
				width: 5px !important;
				height: 5px !important;
				border-radius: 5px !important;
			}
			.carousel#carousel1 {
				border-radius: 20px;
				overflow: hidden;
				box-shadow: 0px 11px 32px -9px rgba(0,0,0,0.25);
			}
			.post-list{
				text-align: center !important;
			}
			.v--modal-box {
				border-radius: 20px !important; 
				padding: 0px !important;
			}
			.card-op-area{
				text-align: left;
				width:auto !important;
				margin: 0px 0px 15px 10px;
				display: inline-block;
			}
			.my-comment{
				text-align: left;
				width:auto !important;
				margin: 0px 0px 15px 10px;
				display: flex !important;
			}
			.view-comments{
				text-align: center;
				width:auto !important;
				margin: 0px 0px 0px 10px;
				display: flex !important;
			}
			.card-options-area{
				text-align: right;
				width:auto !important;
				margin: 5px 10px 15px 0px;
				display: inline-block;
				float: right;
			}
			.img-user{
				width: 40px !important;
				min-width: 40px !important;
				height: 40px !important;
				border-radius: 50px !important;
				object-fit: cover;
				margin-right: 10px;
			}
			.txt-username{
				margin: 3px;
				font-size: 15px;
				color: #333 !important;
			}
			.txt-tmstmp{
				color: #666 !important;
				cursor: default;
			}
			.card{
				border-radius:20px !important;
				border: 0px !important;
			}
			.card-download-app{
				background-color: #FFF !important;
				top: 0px !important;
				position: fixed !important;
				margin-top: 90px;
				text-align: center !important;
				width: 330px;
				height: 530px;
				-webkit-box-shadow: 0px 11px 32px -9px rgba(28,64,222,0.25);
				-moz-box-shadow: 0px 11px 32px -9px rgba(28,64,222,0.25);
				box-shadow: 0px 11px 32px -9px rgba(28,64,222,0.25);
			}
			.btn-download{
				margin-top: 5px;
				border-radius:30px !important;
				color: #FFF !important;
				background: rgb(100,49,252);
				background: linear-gradient(90deg, rgba(100,49,252,1) 0%, rgba(58,104,252,1) 100%);
				text-transform: uppercase;
				font-size: 14px !important;
				letter-spacing: 3px;
				text-decoration: none !important;
				transition: 0.3s;
			}
			.btn-download:hover,
			.btn-download:focus{
				box-shadow: 0 0.2em 1em -0.3em rgba(100,49,252,0.9);
				transform: translateY(-0.2em);
				transition: 0.3s;
			}
			.btn-mini{
				position: absolute;
				top: 10px;
				right: 10px;
				width:35px !important;
				height: 35px !important;
				background-color:rgba(0,0,0,0.08) !important;
				border-radius: 35px !important;
				z-index: 99 !important;
				margin: 0px !important;
				padding: 0px !important;
			}
			.card-img-caixa{
				position: relative;
				top:0;
				left:0;
			}
			.card-img-blur {
				position: relative;
				top:5px;
				left:0;
				border-radius: 20px !important;
				filter: blur(13px);
				opacity: 0.6;
			}
			.card-img-front {
				position: absolute;
				top:0px;
				left:0px;
				width: 100% !important;
				border-radius: 20px !important;
			}
			.card-body{
				padding: 2px 10px 20px 10px !important;
				text-align: left;
			}
			.reactions-area,
			.description-area,
			.user-area,
			.comment-area{
				margin-top: 5px !important;
				width:100%;
				text-align:left;
			}
			.reaction-left-area{
				text-align:left;
				width: 50%;
				height: 42px;
				display: inline-block;
			}
			.reaction-right-area{
				text-align:right;
				width: 50%;
				height: 42px;
				display: inline-block;
			}
			.icon-reaction {
				display: inline-block !important;
				background-color: #333 !important;
				background: #333 !important;
				mask-size: cover;
				cursor: pointer;
				margin: 10px !important;
				width: 25px !important;
				height: 22px !important;
				transition: 0.3s !important;
			}
			.icon-like-empty {
				mask: url('../../../public/icns/like.svg');
				transition: 0.3s !important;
			}
			.icon-like-empty:hover{
				background-color: #F40056 !important;
				transition: 0.3s !important;
			}
			.icon-like-full {
				background-color: #F40056 !important;
				mask: url('../../../public/icns/like-full.svg');
				transition: 0.3s !important;
			}
			.icon-dislike-empty {
				mask: url('../../../public/icns/dislike.svg');
				transition: 0.3s !important;
			}
			.icon-dislike-empty:hover{
				background-color: #4A53FC !important;
				transition: 0.3s !important;
			}
			.icon-dislike-full {
				background-color: #4A53FC !important;
				mask: url('../../../public/icns/dislike-full.svg');
				transition: 0.3s !important;
			}

			.icon-save-empty {
				mask: url('../../../public/icns/save.svg');
				transition: 0.3s !important;
				width: 21px !important;
				height: 23px !important;
			}
			.icon-save-empty:hover{
				background-color: #4A53FC !important;
				transition: 0.3s !important;
			}
			.icon-save-full{
				mask: url('../../../public/icns/save-full.svg');
				background-color: #333 !important;
				width: 21px !important;
				height: 23px !important;
				transition: 0.3s !important;
			}
			.icon-buy-empty {
				mask: url('../../../public/icns/buy.svg');
				transition: 0.3s !important;
				width: 22px !important;
				height: 24px !important;
			}
			.icon-buy-empty:hover{
				background-color: #4A53FC !important;
				transition: 0.3s !important;
			}
			.icon-send {
				mask: url('../../../public/icns/direct.svg');
				transition: 0.3s !important;
				width: 23px !important;
				height: 25px !important;
				margin: 7px !important;
			}
			.comment-input{
				margin: 0px 10px 0px 0px;
				border-radius: 20px !important;
				background-color: #EEE !important;
				border: 0px !important;
				color: #000 !important;
				transition: 0.1s !important;
			}
			.bg-trans{
				background-color: rgba(0,0,0,0) !important;
				text-align: center;
			}
			.bg-trans:hover{
				background-color:rgba(0,0,0,0.08) !important;
				color: #000 !important;
			}
			button:focus{
				outline: 0px !important;
			}
	body
		#app
			.container
				.row
					b-col(v-for='product in products' sm='8')
						.card
															// USER, TIMESTAMP e OPÇÕES
							.user-area
								.card-op-area
									a(:href='product.user')
										img.img-user(:src='product.user_img')
									a.txt-username(:href='product.user')
										b {{product.user}}
									a.txt-username &bull;
									a.txt-username.txt-tmstmp {{moment(product.timestamp, &quot;YYYY-MM-DDThh:mm:ss&quot;).locale(&apos;pt-pt&apos;).fromNow()}}
								.card-options-area
									b-button.search-bar.btn-mini.bg-trans(@mouseover='setmodal(product.id)' @click='showmodal(product.id)')
										i.fas.fa-ellipsis-h
									modal(v-if='shownmodal == product.id' @before-open='this.shownmodal=product.id' name='post_options' width='400px' height='auto')
										b-list-group-item.post-list(href='') Copiar liga&ccedil;&atilde;o
										b-list-group-item.post-list(href='') Reportar
																	// FOTOS DO POST
							.card-img-caixa
								img.card-img.card-img-blur(v-if='product.imgs.length==1' :src='product.imgs[0]')
								img.card-img.card-img-front(v-if='product.imgs.length==1' :src='product.imgs[0]' @dblclick='giveliketouch()')
								b-carousel#carousel1(v-if='product.imgs.length>1' style='text-shadow: 1px 1px 2px #333;' controls='' indicators='' :interval='30000' v-model='slide' @sliding-start='onSlideStart' @sliding-end='onSlideEnd')
									b-carousel-slide(v-for='image in product.imgs' :img-src='image')
																// REAÇÕES AO POST
							.reactions-area
								.reaction-left-area
									button.icon.icon-reaction.icon-like-empty(v-if='getlike(post_id) === 0' @click='givelike(post_id)')  &rlm;&rlm;&lrm; 
									button.icon.icon-reaction.icon-like-full(v-if='getlike(post_id) === 1' @click='remvlike(post_id)')  &rlm;&rlm;&lrm; 
									b {{product.likes}}
									button.icon.icon-reaction.icon-dislike-empty(v-if='getdislike(post_id) === 0' @click='givedislike(post_id)')  &rlm;&rlm;&lrm; 
									button.icon.icon-reaction.icon-dislike-full(v-if='getdislike(post_id) === 1' @click='remvdislike(post_id)')  &rlm;&rlm;&lrm; 
								.reaction-right-area
									button.icon.icon-reaction.icon-save-empty(v-if='getsave(post_id) === 0' @click='savepost(post_id)')  &rlm;&rlm;&lrm; 
									button.icon.icon-reaction.icon-save-full(v-if='getsave(post_id) === 1' @click='unsavepost(post_id)')  &rlm;&rlm;&lrm; 
									button.icon.icon-reaction.icon-buy-empty(@click='')  &rlm;&rlm;&lrm; 
														// TITULO, MARCA, DESCRIÇÃO, PREÇO e AFINS
							.description-area
								.card-op-area
									div(style='display:inline-flex;')
										h5(style='margin:0px;') {{product.name}}
										button.toggle-description(v-b-toggle='product.id')
											i.fa.fa-sort-down
									p.details-post(v-if='product.manufacturer')
										b {{product.manufacturer}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.size}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.color}}
									p.details-post(v-else='')
										b {{product.size}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.color}}
								.card-options-area
									h4(style='color: #4A53FC;')
										b {{product.price.toFixed(2)}}&euro;
								b-collapse.mt-2(v-bind:id='product.id')
									.card-op-area
										p.card-text {{product.description}}
																	// COMENTÁRIOS
							.comment-area
											// COMENTÁRIO MAIS RECENTE
								.my-comment
									a(:href='product.comments[0].user')
										img.img-user(:src='product.comments[0].user_img')
									.comment
										a.txt-username(:href='product.comments[0].user')
											b {{product.comments[0].user}}
										a.txt-username {{product.comments[0].text}}
										a.txt-username &bull;
										a.txt-username.txt-tmstmp
											| {{moment(product.comments[0].timestamp, &quot;YYYY-MM-DDThh:mm:ss&quot;).locale(&apos;pt-pt&apos;).fromNow()}}
											// INSERIR O MEU COMENTARIO
								.my-comment
									a(:href='current_user_name')
										img.img-user(:src='current_user_img')
									b-form-textarea.comment-input(v-model='text' rows='1' max-rows='4' v-bind:id="'comment_'+product.id" placeholder='Escreve um comentário...')
									button.btn.icon.icon-send(@click='')
											// VER MAIS COMENTARIOS
								.view-comments
											// BOTÃO PARA MODAL EM WEBSITE
									b-button.search-bar.bg-trans(v-if='!isMobile()' @mouseover="setmodal('comments_'+product.id)" @click="showmodal('comments_'+product.id)")
										| Ver todos os coment&aacute;rios
											// BOTÃO PARA FULL PAGE EM MOBILE
									b-button.search-bar(v-if='isMobile()' @click="$router.push('/comments/'+product.id)")
										| Ver todos os coment&aacute;rios
											// MODAL COM COMENTARIOS NO WEBSITE
									modal(v-if="shownmodal == 'comments_'+product.id" @before-open="this.shownmodal='comments_'+product.id" name='post_options' width='40%' height='auto' scrollable='true')
										div(style='padding:20px 20px 10px 10px;')
											.card-op-area(style='margin-bottom: 0px !important')
												div(style='display:inline-flex;')
													h5(style='margin:0px;') {{product.name}}
												p.details-post(v-if='product.manufacturer')
													b {{product.manufacturer}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.size}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.color}}
												p.details-post(v-else='')
													b {{product.size}} &rlm;&rlm;&lrm; &bull; &rlm;&rlm;&lrm; {{product.color}}
												p.card-text {{product.description}}
											.card-options-area
												h4(style='color: #4A53FC;')
													b {{product.price.toFixed(2)}}&euro;
											hr
											.my-comment(v-for='comment in product.comments')
												a(:href='comment.user')
													img.img-user(:src='comment.user_img')
												.comment
													a.txt-username(:href='comment.user')
														b {{comment.user}}
													a.txt-username {{comment.text}}
													a.txt-username &bull;
													a.txt-username.txt-tmstmp {{moment(comment.timestamp, &quot;YYYY-MM-DDThh:mm:ss&quot;).locale(&apos;pt-pt&apos;).fromNow()}}
											.my-comment
												a(:href='current_user_name')
													img.img-user(:src='current_user_img')
												b-form-textarea.comment-input(v-model='text' rows='1' max-rows='4' v-bind:id="'comment_'+product.id" placeholder='Escreve um comentário...')
												button.btn.icon PUBLICAR
						// BARRA LATERAL PARA DOWNLOAD DA APP
						b-col(sm='2' v-if='!isMobile() && this.showbanner==1 && this.window.width>800')
							.card.card-download-app
								b-button.search-bar.btn-mini(@click='hidebanner()')
									i.fas.fa-times
								div(style='padding:10px')
									b-carousel#carousel-2(controls='' :interval='20000' v-model='slide' style='text-shadow: 1px 1px 2px #333;' @sliding-start='onSlideStart' @sliding-end='onSlideEnd')
										b-carousel-slide(img-src='img/banners/wishlist.png')
										b-carousel-slide(img-src='img/banners/dinheiro.png')
										b-carousel-slide(img-src='img/banners/ambiente.png')
									a.btn.btn-primary.btn-download(href='')
										b Download app











//
		each post in data
			div(id=post.id class='post')
				h1= post.idUser
				a(href='/post?id='+post.id)
					img(src=post.photoData)
				h2= post.description
				h3= post.price
				form(method="POST" action="/vote")
					input(type="hidden" name="idPost" value=post.id)
					input(type="hidden" name="type" value=1)
					input(type="submit" value="Like")
				form(method="POST" action="/removeVote")
					input(type="hidden" name="idPost" value=post.id)
					input(type="hidden" name="type" value=0)
					input(type="submit" value="RemoveLike")
				p= post.nrlikes
				form(method="POST" action="/vote")
					input(type="hidden" name="idPost" value=post.id)
					input(type="hidden" name="type" value=-1)
					input(type="submit" value="Unlike")
				form(method="POST" action="/removeVote")
					input(type="hidden" name="idPost" value=post.id)
					input(type="hidden" name="type" value=0)
					input(type="submit" value="RemoveUnlike")
				p= post.nrdislikes
				form(method="POST" action="/save")
					input(type="hidden" name="idPost" value=post.id)
					input(type="submit" value="Save")
				form(method="POST" action="/unsave")
					input(type="hidden" name="idPost" value=post.id)
					input(type="submit" value="Unsave")
				form(method="POST" action="/comment")
					input(type="hidden" name="idPost" value=post.id)
					input(type="text" placeholder="Comment something..." name="commentData" required)
					input(type="submit" value="Comment")